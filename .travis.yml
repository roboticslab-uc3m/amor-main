language: cpp
dist: trusty
sudo: required
os: linux

compiler:
  - gcc
  - clang

addons:
  apt:
    packages:
    # AMOR API
    #- libboost-thread-dev

    # AMOR API, YARP and KDL
    - libeigen3-dev

    # OpenRAVE
    - libboost-all-dev
    - libqt4-dev
    - qt4-dev-tools
    - libxml2-dev
    - libode-dev
    - libsoqt4-dev
    - libcoin80-dev

    # ROBOTICSLAB
    - libopencv-dev
    - libspnav-dev

before_install:
  #-- Configure Git (needed by YCM)
  - if [ ! `git config --get user.email` ]; then `git config --global user.email 'user@example.com'`; fi
  - if [ ! `git config --get user.name` ]; then `git config --global user.name 'Travis CI'`; fi

  #-- Register SSH deploy key for AMOR API private repository
  - source "$TRAVIS_BUILD_DIR/scripts/travis/configure-ssh.sh"

  #-- Add source repository for PCL-related packages
  - sudo add-apt-repository --yes ppa:v-launchpad-jochen-sprickerhof-de/pcl
  - sudo apt-get -qq update

install:
  #-- Install PCL
  - sudo apt-get install libpcl-all-dev

  #-- Install ROBOTICSLAB deps
  - sudo apt-get install libxwiimote-dev

before_script:
  - mkdir build && cd "$_"
  - cmake .. -DCMAKE_INSTALL_PREFIX="$PWD/install-system" -DYCM_GIT_GITHUB_BASE_ADDRESS="git@github.com:"

script:
  - make install

after_success:
  - make uninstall
